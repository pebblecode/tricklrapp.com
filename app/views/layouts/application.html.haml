!!!
%html
  %head
    %title Tricklr
    
    %link{:rel => "icon", :type => "image/x-icon", :href => "/favicon.ico"}/
    %link{:rel => "shortcut icon", :type => "image/x-icon", :href => "/favicon.ico"}/
    
    = stylesheet_link_tag 'application'    
    :plain
      <!--[if IE 7]>
        <link rel="stylesheet" type="text/css" href="/assets/ie7.css">
      <![endif]-->
      <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
      <![endif]-->
    
    = csrf_meta_tag
  
  - body_class = []
  - body_class << "no-user" unless current_user
  :ruby
    body_class << if (controller.class.name == "StatusesController")
                    "status-listing-page"
                  elsif (controller.class.name == "SettingsController")
                    "settings-page"
                  else
                    "page"
                  end
    
  %body{ :class => body_class.join(" ") }
    %section#wrapper
      #content-wrapper
        %section.topbar
          %h3#logo
            %a(href="/") 
              Tricklr
          = image_tag('beta.png', :title => 'Currently Beta software', :class => 'beta-tag', :width => "86", :height => "85")
          
          %ul.nav
            - if current_user
              %li.settings
                =link_to "Settings", settings_path
              %li.help
                =link_to "Help", help_path
              %li.account
                =link_to current_user.nickname, root_path
                %span.sep= "|"
                =link_to "Logout", destroy_user_session_path

            - else
              %li.login
                =link_to "Sign in with Twitter", user_omniauth_authorize_path(:twitter)

        %section#content
          - if flash[:notice]
            %div.alert-message.success
              = flash[:notice]
          - elsif flash[:error]
            %div.alert-message.error
              = flash[:notice]
          =yield

      =render :partial => 'layouts/shared/footer'

    = javascript_include_tag 'application'
    = javascript_include_tag "http://use.typekit.com/kvm0rss.js"
    :javascript
      try{Typekit.load();}catch(e){}    
